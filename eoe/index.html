<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <meta name="description" content="Eclipse of Eternity is an open-world RPG set to release in December 2028. Sign up before the early deadline to earn 1 year of game time for free!" />
    <title>Eclipse of Eternity: Sign Up</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="particles.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Almendra+SC&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
    <link rel="icon" href="https://pi-3-14-github-io.pages.dev/eoe/favicon.ico" type="image/x-icon">
    <style>
        *{
            font-family: 'Poppins';
            font-weight: bold;
        }
        .form-div{
            animation: expandForm 2s ease-out forwards;
        }
        .fade-in-opacity{
            animation: fadeInOpacity 2s ease-out;
        }
        .medieval-button{
            font-family: 'Almendra SC';
            letter-spacing: 2px;
            font-weight: bold;
        }
        .terrain{
            animation: fadeHalfOutOpacity 5s ease-out;
            opacity: 0.5;
        }
        .terrain{
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 200px;
            background-color: #2d2b2b;
            clip-path: polygon(0% 100%,20% 40%,40% 50%,60% 30%,80% 50%,100% 40%,100% 100%);
            z-index: -1;
        }
        .asteroid{
            position: absolute;
            top: 20%;
            right: 20%;
            width: 300px;
            height: 300px;
            background-color: #3a3a3a;
            clip-path: polygon(
                50% 0%,
                65% 5%,
                80% 15%,
                90% 30%,
                95% 45%,
                100% 60%,
                90% 75%,
                80% 85%,
                65% 95%,
                50% 100%,
                35% 95%,
                20% 85%,
                10% 75%,
                5% 60%,
                0% 45%,
                10% 30%,
                20% 15%
            );
            z-index: -1;
            opacity: 0.4;
            filter: blur(2px);
        }
        .light{
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ffd700;
            border-radius: 50%;
            box-shadow: 0 0 30px 10px rgba(255,215,0,0.5);
            z-index: 0;
            animation: flicker 2s infinite ease-in-out;
        }
        .fire-particle{
            position: absolute;
            width: 4px;
            height: 20px;
            background: linear-gradient(to bottom,rgba(255,80,80,0.9),rgba(255,0,0,0));
            border-radius: 50%;
            opacity: 0.7;
            transform: rotate(-45deg);
            animation: flickerParticle 1.2s infinite ease-in-out;
            pointer-events: none;
            z-index: -1;
        }
        @keyframes flickerParticle{
            0%{
                opacity: 0.8;
                transform: translateY(0) rotate(-135deg) scaleY(1);
            }
            50%{
                opacity: 0.4;
                transform: translateY(-5px) rotate(-135deg) scaleY(1.2);
            }
            100%{
                opacity: 0.8;
                transform: translateY(0) rotate(-135deg) scaleY(1);
            }
        }
        @keyframes flicker{
            0%,100%{ box-shadow: 0 0 30px 10px rgba(255,215,0,0.5); }
            50%{ box-shadow: 0 0 40px 15px rgba(255,215,0,0.7); }
        }
        @keyframes expandForm{
            0%{
                transform: scale(0.1);
                opacity: 0;
            }
            30%{
                transform: scale(0.9);
            }
            100%{
                transform: scale(1);
                opacity: 1;
            }
        }
        @keyframes fadeInOpacity{
            0%{
                opacity: 0;
            }
            100%{
                opacity: 1;
            }
        }
        @keyframes fadeHalfOutOpacity{
            0%{
                opacity: 1;
            }
            100%{
                opacity: 0.5;
            }
        }
        @keyframes fadeOutOpacity{
            0%{
                opacity: 1;
                transform: scale(1);
            }
            25%{
                opacity: 0.1;
            }
            50%{
                opacity: 0;
                transform: scaleX(0.5) scaleY(0.5);
            }
            51%{
                transform: scale(0.1);
            }
            66%{
                transform: scale(0.9);
                opacity: 0.32;
            }
            100%{
                transform: scale(1);
                opacity: 1;
            }
        }
        .fade-out-opacity{
            animation: fadeOutOpacity 4s ease-out;
        }
        .eclipse-container{
            position: absolute;
            top: 40%;
            left: 50%;
            transform: translate(-50%,-50%);
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: radial-gradient(circle,rgba(255,200,50,0.1) 0%,rgba(255,100,0,0.2) 60%,transparent 80%);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: -2;
            animation: glowPulse 3s infinite ease-in-out;
        }
        .eclipse-core{
            width: 120px;
            height: 120px;
            background-color: #000;
            border-radius: 50%;
            box-shadow: 0 0 30px 10px rgba(255,150,0,0.3),0 0 60px 25px rgba(255,150,0,0.15);
        }
        @keyframes glowPulse{
            0%,100%{
                box-shadow: 0 0 60px 25px rgba(255,150,0,0.15);
            }
            50%{
                box-shadow: 0 0 80px 35px rgba(255,180,0,0.25);
            }
        }
        input{
            transition: all 0.3s ease;
        }
        .star{
            position: absolute;
            width: 2px;
            height: 2px;
            background-color: white;
            border-radius: 50%;
            box-shadow: 0 0 6px 2px rgba(255,255,255,0.6);
            opacity: 0.8;
            animation: twinkle 4s infinite ease-in-out alternate;
        }
        @keyframes twinkle{
            0%{ opacity: 0.4;
                transform: scale(1);
            }
            100%{
                opacity: 1;
                transform: scale(1.2);
            }
        }
        #form-div{
            z-index: 1000;
        }
        .special-text{
            font-family: 'Almendra SC';
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-[#0d001a] via-[#0d001a] to-black text-white flex items-center justify-center">
    <div class="asteroid" id="asteroid"></div>
    <div class="terrain"></div>
    <div class="light" style="bottom: 10%; left: 10%;"></div>
    <div class="light" style="bottom: 13%; left: 30%;"></div>
    <div class="light" style="bottom: 10%; left: 50%;"></div>
    <div class="light" style="bottom: 15%; left: 70%;"></div>
    <div class="light" style="bottom: 11%; left: 90%;"></div>
    <div class="eclipse-container">
        <div class="eclipse-core"></div>
    </div>
    <div class="fade-in-opacity absolute top-0 left-0 w-full h-32 bg-gradient-to-b from-red-700 to-transparent z-0"></div>
    <div id="form-div" class="form-div bg-white/5 backdrop-blur-lg p-8 rounded-2xl shadow-lg w-full max-w-md text-center border border-white/10">
        <h1 class="text-2xl font-bold mb-4 text-white">Eclipse of Eternity: Sign Up</h1>
        <p class="special-text text-lg mb-4 text-gray-300">Your legend begins here, new adventurer...</p>
        <form id="sign-up-form">
            <input name="username" placeholder="Traveler name (optional)" class="focus:shadow-lg focus:shadow-red-500 transition-shadow mb-2 w-full p-3 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-red-500"/>
            <input name="email" type="email" placeholder="Email address (required)" class="focus:shadow-lg focus:shadow-red-500 transition-shadow mt-1 w-full p-3 rounded-lg text-black focus:outline-none focus:ring-2 focus:ring-red-500" required/>
            <button type="submit" class="medieval-button border border-gray-500 mt-4 w-full bg-red-600 shadow-red-700 shadow-md hover:bg-red-700 transition text-white font-semibold py-2 px-4 rounded-lg">Join The World</button>
        </form>
    </div>
    <div class="fixed top-4 left-4 transform flex gap-6 z-50 opacity-50 hover:opacity-100 transition-all">
        <a href="https://codingblink.com" target="_blank" class="text-white hover:text-yellow-400 text-2xl transition">
            <i class="fas fa-home"></i>
        </a>
    </div>
    <div class="fixed bottom-4 left-1/2 transform -translate-x-1/2 flex gap-6 z-50">
        <a href="https://discord.gg/GnGEwzwvGe" target="_blank" class="text-white hover:text-indigo-400 text-2xl transition">
            <i class="fab fa-discord"></i>
        </a>
        <a href="https://twitter.com/eoe_game" target="_blank" class="text-white hover:text-sky-400 text-2xl transition">
            <i class="fab fa-twitter"></i>
        </a>
        <a href="mailto:eclipseofeternityofficial@gmail.com" class="text-white hover:text-red-400 text-2xl transition">
            <i class="fas fa-envelope"></i>
        </a>
        <a href="https://www.gofundme.com/f/support-pierres-dream-eclipse-of-eternity-game" target="_blank" class="text-white hover:text-green-400 text-2xl transition">
            <i class="fas fa-hand-holding-heart"></i>
        </a>
    </div>
    <div class="fixed bottom-4 right-4 flex flex-row gap-6 z-50">
        <a href="legal.html" class="text-gray-400 hover:text-red-500 text-2xl transition">
            <p class="text-sm mr-2 inline">Legal</p><i class="fas fa-gavel inline"></i>
        </a>
    </div>
</body>
<script>
    let asteroid=document.getElementById("asteroid");
    for(let i=0;i<60;i++){
        const particle=document.createElement('div');
        particle.className='fire-particle';
        const top=particlePositions[i][0];
        const right=particlePositions[i][1];
        particle.style.top=`${top}%`;
        particle.style.right=`${right}%`;
        const height=particlePositions[i][2]*2;
        particle.style.height=`${height}px`;
        particle.style.transform=`rotate(-${30+Math.random()*30}deg)`;
        asteroid.appendChild(particle);
    }
    for(let i=0;i<60;i++){
        const particle=document.createElement('div');
        particle.className='fire-particle';
        const top=particlePositions[i][0];
        const right=particlePositions[i][1];
        particle.style.top=`${top}%`;
        particle.style.right=`${right}%`;
        const height=particlePositions[i][2]*2;
        particle.style.height=`${height}px`;
        particle.style.transform=`rotate(-${30+Math.random()*30}deg)`;
        if(top<=33 && right<=28){
            document.body.appendChild(particle);
        }
    }
    for(let i=0;i<100;i++){
        const star=document.createElement('div');
        star.className='star';
        const top=starPositions[i][0];
        const left=starPositions[i][1];
        star.style.top=`${top}vh`;
        star.style.left=`${left}vw`;
        const size=starPositions[i][2];
        star.style.width=`${size}px`;
        star.style.height=`${size}px`;
        star.style.boxShadow=`0 0 ${size * 3}px ${size}px rgba(255,255,255,0.5)`;
        if(top<=90){
            document.body.appendChild(star);
        }
    }
    document.getElementById('sign-up-form').addEventListener('submit',function(e){
        e.preventDefault();
        const formDiv=document.getElementById('form-div');
        formDiv.classList.add('fade-out-opacity');
        const form=e.target;
        const data={
            username: form.username.value,
            email: form.email.value
        };
        async function send_data(data){
            let failTimeout=setTimeout(function(){formDiv.innerHTML=`<h1 class="text-2xl font-bold mb-4 text-white">Please wait...</h1><p class="text-lg mb-4 text-gray-300">Things are taking longer than usual to connect to the server...<br>This could take a minute.</p>`;},2000);
            try{
                let startTime=Date.now();
                const response=await fetch('https://eoe-game.ddns.net:443/signup',{
                    method: 'POST',
                    headers:{
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                if(response.ok){
                    let timeTaken=Date.now()-startTime;
                    clearTimeout(failTimeout);
                    setTimeout(()=>{
                        formDiv.innerHTML=`<h1 class="text-2xl font-bold mb-4 text-white">Welcome to Eclispe of Eternity.</h1><p class="text-lg mb-4 text-gray-300">You've reserved your spot.<br>You will receive an email when your account is ready for creation.</p>`;
                    },2000-timeTaken);
                }else{
                    const errorData=await response.json();
                    let errorMessage='An error occurred when connecting to the server. Please try again.';
                    if(errorData.error){
                        if(errorData.error==='Username is already taken.'){
                            errorMessage='That username is already taken. Please choose a different one.';
                        }else if(errorData.error==='Email is already taken.'){
                            errorMessage='That email is already taken. Please use a different email.';
                        }else if(errorData.error==='Username may contain inappropriate language.'){
                            errorMessage='That username contains inappropriate language. Please choose a different one.';
                        }else{
                            errorMessage=errorData.error;
                        }
                    }
                    clearTimeout(failTimeout);
                    formDiv.classList.remove('fade-out-opacity');
                    formDiv.innerHTML=`<h1 class="text-2xl font-bold mb-4 text-white">Error!</h1><p class="text-lg mb-4 text-gray-300">${errorMessage}</p>`;
                }
            }catch(error){
                clearTimeout(failTimeout);
                console.error('Error submitting form:',error);
                formDiv.classList.remove('fade-out-opacity');
                formDiv.innerHTML=`<h1 class="text-2xl font-bold mb-4 text-white">Error!</h1><p class="text-lg mb-4 text-gray-300">Could not connect to the server.<br>Please try again later.</p>`;
            }
        }
        send_data(data);
    });
</script>
</html>